<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ThreadGenius - Threads Viraux par IA</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://js.stripe.com/v3/"></script>
  
  <style>
    @keyframes fade-in { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .animate-fade-in { animation: fade-in 0.6s ease-out; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .animate-spin { animation: spin 1s linear infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    @keyframes bounce { 0%, 100% { transform: translateY(-25%); animationTimingFunction: cubic-bezier(0.8,0,1,1); } 50% { transform: none; animationTimingFunction: cubic-bezier(0,0,0.2,1); } }
    .animate-bounce { animation: bounce 1s infinite; }
    
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const STRIPE_PUBLIC_KEY = 'pk_test_51SeuRIAEBZNGGY2rgMW10z33tYNmVRsJ5uOXDDaK5UsWapy230sMrtyMQ9r9bPbRqLljcrGHX9GFdQW1PYOAWJdo006rzD0gin';
    const stripe = Stripe(STRIPE_PUBLIC_KEY);

    const Icons = {
      Twitter: () => (<svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>),
      Linkedin: () => (<svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>),
      Sparkles: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>),
      Zap: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>),
      Fire: () => (<svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clipRule="evenodd" /></svg>),
      Check: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>),
      Copy: () => (<svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>),
      Crown: () => (<svg className="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z" clipRule="evenodd" /></svg>),
      Loader: () => (<svg className="w-6 h-6 animate-spin" fill="none" viewBox="0 0 24 24"><circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle><path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>),
      TrendingUp: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>),
      Heart: () => (<svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clipRule="evenodd" /></svg>),
      Eye: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>)
    };

    function ThreadGenius() {
      const [topic, setTopic] = useState('');
      const [platform, setPlatform] = useState('twitter');
      const [tone, setTone] = useState('engaging');
      const [thread, setThread] = useState([]);
      const [loading, setLoading] = useState(false);
      const [copied, setCopied] = useState(false);
      const [dailyUses, setDailyUses] = useState(0);
      const [showPaywall, setShowPaywall] = useState(false);
      const [isPremium, setIsPremium] = useState(false);

      const MAX_FREE_USES = 3;

      useEffect(() => {
        const premium = localStorage.getItem('threadgenius_premium');
        if (premium === 'true') setIsPremium(true);

        const today = new Date().toDateString();
        const stored = localStorage.getItem('threadgenius_usage');
        if (stored) {
          const data = JSON.parse(stored);
          if (data.date === today) {
            setDailyUses(data.count);
          } else {
            localStorage.setItem('threadgenius_usage', JSON.stringify({ date: today, count: 0 }));
          }
        }
      }, []);

      const tones = [
        { id: 'engaging', name: 'ðŸ”¥ Viral', desc: 'Hooks puissants', color: 'from-orange-500 to-red-500' },
        { id: 'educational', name: 'ðŸŽ“ Expert', desc: 'AutoritÃ© & valeur', color: 'from-blue-500 to-indigo-500' },
        { id: 'inspirational', name: 'âœ¨ Inspirant', desc: 'Ã‰motion & story', color: 'from-purple-500 to-pink-500' },
        { id: 'controversial', name: 'âš¡ Provocant', desc: 'DÃ©bat & engagement', color: 'from-yellow-500 to-orange-500' }
      ];

      const generateThread = async () => {
        if (!topic.trim()) {
          alert('Entre un sujet pour ton thread !');
          return;
        }

        if (!isPremium && dailyUses >= MAX_FREE_USES) {
          setShowPaywall(true);
          return;
        }

        setLoading(true);
        setThread([]);

        try {
          const platformName = platform === 'twitter' ? 'Twitter/X' : 'LinkedIn';
          const toneDetails = tones.find(t => t.id === tone);
          
          const response = await fetch("https://api-inference.huggingface.co/models/mistralai/Mixtral-8x7B-Instruct-v0.1", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              inputs: `CrÃ©e un thread ${platformName} ULTRA-VIRAL et PUNCHY sur: "${topic}"\n\nStyle: ${toneDetails?.desc}\n\nFORMAT STRICT - CHAQUE POST doit Ãªtre sÃ©parÃ© par "POST:::":\n\nPOST::: [Hook viral avec chiffre choquant ou question provocante]\nPOST::: [Story personnelle ou exemple concret qui illustre le problÃ¨me]\nPOST::: [RÃ©vÃ©lation contre-intuitive avec contexte]\nPOST::: [Erreur fatale que tout le monde fait]\nPOST::: [La mÃ©thode en 3 Ã©tapes concrÃ¨tes]\nPOST::: [Exemple de rÃ©sultat + preuve sociale]\nPOST::: [Objection anticipÃ©e + rÃ©ponse]\nPOST::: [Call-to-action fort]\n\nRÃˆGLES CRITIQUES:\n- Premier post DOIT choquer/surprendre\n- Utilise "Tu" pas "Vous"\n- ${platform === 'twitter' ? 'Max 280 caractÃ¨res/post' : '100-150 mots/post'}\n- Inclus Ã©mojis stratÃ©giques (1-2 par post)\n- Chiffres et statistiques\n- Questions rhÃ©toriques\n- Patterns de threads viraux\n- Fin avec CTA puissant (RT, follow, commentaire)\n\nPAS de preamble, commence direct par POST:::`,
              parameters: {
                max_new_tokens: 2000,
                temperature: 0.9,
                top_p: 0.95,
                return_full_text: false
              }
            })
          });

          const data = await response.json();
          let generatedText = '';
          
          if (Array.isArray(data) && data[0]?.generated_text) {
            generatedText = data[0].generated_text;
          } else if (data.generated_text) {
            generatedText = data.generated_text;
          } else {
            throw new Error("API indisponible");
          }

          let posts = generatedText
            .split(/POST:::/g)
            .filter(p => p.trim())
            .map(p => p.trim())
            .slice(0, platform === 'twitter' ? 10 : 7);

          if (posts.length < 3) {
            // Fallback threads ultra-punchy
            const fallbackThreads = {
              engaging: [
                `âŒ ${topic} - ArrÃªte TOUT ce que tu fais\n\nCe thread va changer ta vision en 2 minutes ðŸ‘‡\n\n(Sauvegarde maintenant, remercie-moi plus tard)`,
                `Il y a 6 mois, j'Ã©tais comme toi.\n\nJe pensais que ${topic} Ã©tait impossible.\n\nAujourd'hui ? 10x mes rÃ©sultats.\n\nVoici ce qui a changÃ© ðŸ§µ`,
                `97% des gens se trompent sur ${topic}.\n\nIls font cette erreur fatale :\n\nâ†’ Ils [erreur commune]\n\nRÃ©sultat ? ZÃ©ro progrÃ¨s.\n\nVoici ce qui marche VRAIMENT ðŸ‘‡`,
                `STOP aux conseils gÃ©nÃ©riques sur ${topic}.\n\nVoici la mÃ©thode que personne ne partage :\n\n1. [Ã‰tape concrÃ¨te]\n2. [Action spÃ©cifique]\n3. [RÃ©sultat mesurable]\n\nJ'ai testÃ© pendant 90 jours. Ã‡a marche. ðŸ“ˆ`,
                `La vÃ©ritÃ© sur ${topic} que les "experts" cachent :\n\nTu n'as PAS besoin de :\nâŒ [Mythe 1]\nâŒ [Mythe 2]\nâŒ [Mythe 3]\n\nTu as juste besoin de Ã§a ðŸ‘‡`,
                `J'ai analysÃ© 100+ cas de succÃ¨s avec ${topic}.\n\nVoici le seul pattern qui revient TOUJOURS :\n\n[Pattern spÃ©cifique avec exemple]\n\nCopie-colle Ã§a = tu gagnes 6 mois. ðŸš€`,
                `${topic} en 2024 â‰  ${topic} en 2020\n\nLes anciennes mÃ©thodes sont MORTES.\n\nVoici ce qui marche maintenant :\n\nâ†’ [Nouvelle approche]\n\nJ'ai fait +347% avec Ã§a. Preuve en bio. ðŸ“Š`,
                `Si tu ne fais qu'UNE chose pour ${topic} cette annÃ©e :\n\nFais Ã§a ðŸ‘‡\n\n[Action ultra-spÃ©cifique]\n\nÃ‡a prend 15 min.\nÃ‡a change tout.\n\nMerci-moi dans 30 jours. ðŸ’ª`,
                `RÃ©cap rapide sur ${topic} :\n\nâœ“ Commence par [action 1]\nâœ“ Ã‰vite [erreur fatale]\nâœ“ Focus sur [mÃ©trique clÃ©]\nâœ“ Teste pendant [pÃ©riode]\n\nApplique Ã§a. Reviens me dire. RT pour sauver ce thread ðŸ”¥`
              ],
              educational: [
                `ðŸ“š MASTER CLASS sur ${topic}\n\nTout ce que tu dois savoir en 9 posts.\n\n(Lis Ã§a maintenant, applique demain, remercie-moi la semaine prochaine) ðŸ‘‡`,
                `Comprendre ${topic} : L'ESSENTIEL\n\nDÃ©finition simple :\n\n${topic} = [explication claire en 2 lignes]\n\nPourquoi c'est critique en 2024 ?\n\nâ†’ [Raison 1 avec stat]\nâ†’ [Raison 2 avec exemple] ðŸ“Š`,
                `Les 3 piliers FONDAMENTAUX de ${topic} :\n\n1ï¸âƒ£ [Pilier 1] - Sans Ã§a, rien ne marche\n2ï¸âƒ£ [Pilier 2] - Ã‡a fait la diffÃ©rence\n3ï¸âƒ£ [Pilier 3] - C'est le game-changer\n\nMaÃ®trise ces 3 = tu domines. ðŸŽ¯`,
                `ERREUR #1 avec ${topic} :\n\nâŒ Faire [erreur commune]\n\nPourquoi c'est fatal ?\n\nâ†’ [ConsÃ©quence 1]\nâ†’ [ConsÃ©quence 2]\n\nComment l'Ã©viter : [Solution concrÃ¨te] âœ…`,
                `La mÃ©thode en 5 Ã©tapes pour ${topic} :\n\nÃ‰TAPE 1: [Action prÃ©cise]\nÃ‰TAPE 2: [Action suivante]\nÃ‰TAPE 3: [Action critique]\nÃ‰TAPE 4: [Optimisation]\nÃ‰TAPE 5: [Scaling]\n\nSuis Ã§a = rÃ©sultats garantis. ðŸ”„`,
                `Ã‰TUDE DE CAS rÃ©elle sur ${topic} :\n\nAvant : [Situation de dÃ©part]\nActions : [Ce qui a Ã©tÃ© fait]\nRÃ©sultats : [Chiffres concrets]\n\nLeÃ§on Ã  retenir : [Insight actionnable] ðŸ’¡`,
                `Les 5 ressources ESSENTIELLES pour ${topic} :\n\nðŸ“– [Ressource 1] - Pour [bÃ©nÃ©fice]\nðŸŽ§ [Ressource 2] - Pour [bÃ©nÃ©fice]\nðŸ’» [Ressource 3] - Pour [bÃ©nÃ©fice]\n\nTout est gratuit. Commence aujourd'hui. ðŸŽ`,
                `Mesurer ton progrÃ¨s avec ${topic} :\n\nðŸ“Š MÃ©trique #1: [KPI prÃ©cis]\nðŸ“Š MÃ©trique #2: [KPI prÃ©cis]\nðŸ“Š MÃ©trique #3: [KPI prÃ©cis]\n\nTrack Ã§a chaque semaine.\n\nCe qui se mesure s'amÃ©liore. ðŸ“ˆ`,
                `RÃ‰CAP COMPLET ${topic} :\n\nâœ… Commence par [Ã©tape 1]\nâœ… Ã‰vite [erreur]\nâœ… Focus [prioritÃ©]\nâœ… Mesure [mÃ©trique]\nâœ… Optimise [aspect]\n\nMaintenant : ACTION.\n\nQuestions ? Commente ðŸ‘‡`
              ],
              inspirational: [
                `âœ¨ ${topic} - Mon histoire (brutalement honnÃªte)\n\nIl y a 1 an : [situation difficile]\n\nAujourd'hui : [transformation]\n\nCe qui a changÃ© ? Lis ce thread ðŸ‘‡`,
                `Personne ne parle de Ã§a...\n\nMais ${topic} a littÃ©ralement sauvÃ© ma vie.\n\nPas de bullshit.\nJuste la vÃ©ritÃ©.\n\nVoici mon histoire ðŸ§µ`,
                `Tu penses que ${topic} c'est impossible ?\n\nJe pensais pareil.\n\nJ'avais tort.\n\nVoici ce que j'ai appris (Ã§a va te choquer) ðŸ‘‡`,
                `La leÃ§on la plus dure sur ${topic} :\n\nJ'ai Ã©chouÃ© 7 fois avant de comprendre Ã§a ðŸ‘‡\n\n[LeÃ§on contre-intuitive]\n\nCette erreur m'a coÃ»tÃ© [consÃ©quence]. Ne fais pas comme moi. ðŸ’”`,
                `${topic} m'a appris que :\n\nðŸ’Ž [LeÃ§on 1 profonde]\nðŸ’Ž [LeÃ§on 2 Ã©motionnelle]\nðŸ’Ž [LeÃ§on 3 transformatrice]\n\nCes leÃ§ons ont changÃ© ma vie.\n\nEt elles vont changer la tienne. ðŸŒŸ`,
                `Le moment oÃ¹ tout a basculÃ© avec ${topic} :\n\n[Story Ã©motionnelle prÃ©cise]\n\nCe jour-lÃ , j'ai compris [insight profond]\n\nSi tu retiens qu'une chose de ce thread, retiens Ã§a ðŸ‘‡`,
                `${topic} n'est PAS ce qu'on t'a dit.\n\nC'est [vision alternative inspirante]\n\nQuand j'ai compris Ã§a, tout a changÃ© :\n\nâ†’ [RÃ©sultat 1]\nâ†’ [RÃ©sultat 2]\nâ†’ [RÃ©sultat 3]\n\nTon tour maintenant. ðŸ¦‹`,
                `3 ans avec ${topic}.\n\nVoici ce que personne ne te dit :\n\n[VÃ©ritÃ© inconfortable mais libÃ©ratrice]\n\nC'est dur Ã  entendre.\nMais tu dois le savoir.\n\nPour ton bien. ðŸ’ª`,
                `Si je pouvais remonter le temps et me parler sur ${topic} :\n\n"${topic} n'est pas [idÃ©e reÃ§ue].\n\nC'est [vision transformatrice].\n\nCommence maintenant. Pas demain. MAINTENANT."\n\nÃ‰coute ce conseil. ðŸ”¥`
              ],
              controversial: [
                `ðŸš¨ UNPOPULAR OPINION sur ${topic}\n\nTout le monde dit [opinion populaire].\n\nC'est FAUX.\n\nVoici pourquoi (thread qui va faire dÃ©bat) ðŸ‘‡`,
                `${topic} : La vÃ©ritÃ© que personne n'ose dire\n\nL'industrie vous ment.\n\nVoici ce qui se passe VRAIMENT :\n\n[RÃ©vÃ©lation choquante]\n\nD'accord ou pas d'accord ? ðŸŽ¯`,
                `ArrÃªtez avec ${topic}.\n\nSÃ©rieusement.\n\n[Argument provocateur mais solide]\n\nJe sais, Ã§a fait mal Ã  entendre.\n\nMais c'est la rÃ©alitÃ©. ðŸ’£`,
                `${topic} est MORT en 2024.\n\nVoici ce qui le remplace :\n\n[Alternative disruptive]\n\nLes "experts" ne sont pas d'accord.\n\nMais les rÃ©sultats parlent ðŸ“Š`,
                `La stratÃ©gie que tout le monde utilise pour ${topic} ?\n\nâŒ Elle ne marche plus.\n\nPourquoi ?\n\nâ†’ [Raison 1]\nâ†’ [Raison 2]\nâ†’ [Raison 3]\n\nVoici ce qui marche NOW ðŸ‘‡`,
                `HOT TAKE sur ${topic} :\n\n[Opinion controversÃ©e mais argumentÃ©e]\n\nJe vais me faire dÃ©tester pour Ã§a.\n\nMais quelqu'un devait le dire.\n\nChange my mind ðŸ’¬`,
                `${topic} : Le mythe vs la rÃ©alitÃ©\n\nMYTHE : [Croyance commune]\nRÃ‰ALITÃ‰ : [VÃ©ritÃ© inconfortable]\n\nLes preuves ? En voici 3 :\n\n1. [Preuve 1]\n2. [Preuve 2]\n3. [Preuve 3] ðŸ“ˆ`,
                `Si tu continues Ã  faire ${topic} comme tout le monde :\n\nTu vas [consÃ©quence nÃ©gative]\n\nC'est brutal.\nC'est direct.\nMais c'est vrai.\n\nFais diffÃ©remment : [alternative] âš¡`,
                `DÃ©bat ouvert sur ${topic} :\n\nâ“ [Question provocante]\n\nMoi je pense [position claire].\n\nToi ?\n\nD'accord = â¤ï¸\nPas d'accord = ðŸ’¬\n\nOn en discute ðŸ‘‡`
              ]
            };

            const fallback = fallbackThreads[tone] || fallbackThreads.engaging;
            posts = platform === 'twitter' ? fallback : fallback.slice(0, 6);
          }

          setThread(posts);

          if (!isPremium) {
            const today = new Date().toDateString();
            const newCount = dailyUses + 1;
            setDailyUses(newCount);
            localStorage.setItem('threadgenius_usage', JSON.stringify({ date: today, count: newCount }));
          }

        } catch (error) {
          console.error('Erreur:', error);
          // Ultra-punchy fallback
          const emergency = [
            `ðŸ”¥ ${topic} - Thread ESSENTIEL\n\nTout ce que tu dois savoir ðŸ‘‡`,
            `Premier secret sur ${topic} :\n\n[Point clÃ© qui change tout]\n\nPourquoi personne n'en parle ? ðŸ¤”`,
            `L'erreur #1 que TOUT LE MONDE fait :\n\nâŒ [Erreur commune]\n\nComment l'Ã©viter ? Simple ðŸ‘‡`,
            `La mÃ©thode qui marche (testÃ©e et validÃ©e) :\n\n1. [Ã‰tape 1]\n2. [Ã‰tape 2]\n3. [Ã‰tape 3]\n\nSuis Ã§a = rÃ©sultats garantis ðŸ“Š`,
            `Ce que j'aurais aimÃ© savoir sur ${topic} avant :\n\nðŸ’¡ [Insight important]\n\nÃ‡a m'aurait Ã©conomisÃ© 6 mois. ðŸš€`,
            `${topic} en 2024 :\n\nâœ… Fais [action]\nâŒ Ã‰vite [erreur]\nðŸŽ¯ Focus [prioritÃ©]\n\nC'est tout ce dont tu as besoin. ðŸ’ª`,
            `RÃ©cap final ${topic} :\n\nâ†’ Commence maintenant\nâ†’ Sois constant\nâ†’ Mesure tes rÃ©sultats\nâ†’ Ajuste et optimise\n\nSauvegarde ce thread ! ðŸ”–`
          ];
          setThread(platform === 'twitter' ? emergency : emergency.slice(0, 5));
          
          if (!isPremium) {
            const today = new Date().toDateString();
            const newCount = dailyUses + 1;
            setDailyUses(newCount);
            localStorage.setItem('threadgenius_usage', JSON.stringify({ date: today, count: newCount }));
          }
        } finally {
          setLoading(false);
        }
      };

      const copyThread = () => {
        const text = thread.map((post, i) => `${i + 1}/ ${post}`).join('\n\n');
        navigator.clipboard.writeText(text);
        setCopied(true);
        setTimeout(() => setCopied(false), 2000);
      };

      const handleUpgrade = async () => {
        alert('ðŸ’³ Paiements Stripe en cours d\'activation\n\nPour l\'instant, teste le mode Premium local:\nOuvre la console (F12) et tape: activatePremium()');
      };

      useEffect(() => {
        window.activatePremium = () => {
          localStorage.setItem('threadgenius_premium', 'true');
          setIsPremium(true);
          alert('âœ… Mode Premium activÃ© !');
          window.location.reload();
        };
      }, []);

      const remainingUses = isPremium ? 'âˆž' : MAX_FREE_USES - dailyUses;

      return (
        <div className="min-h-screen bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 p-4 md:p-8">
          <div className="max-w-7xl mx-auto">
            {/* Header */}
            <div className="text-center mb-12 animate-fade-in">
              <div className="inline-flex items-center gap-3 glass px-8 py-4 rounded-full mb-6 shadow-2xl">
                <Icons.Zap />
                <span className="text-white font-black text-lg tracking-wider">THREADGENIUS</span>
                {isPremium && <Icons.Crown />}
                <Icons.Sparkles />
              </div>
              
              <h1 className="text-5xl md:text-7xl font-black text-white mb-6 leading-tight">
                Threads Qui
                <br />
                <span className="inline-block mt-2 bg-gradient-to-r from-yellow-300 via-orange-300 to-red-400 text-transparent bg-clip-text animate-pulse">
                  EXPLOSENT ðŸ’¥
                </span>
              </h1>
              
              <p className="text-2xl text-white/90 mb-8 font-medium">
                L'IA qui Ã©crit mieux que les top creators ðŸš€
              </p>

              {/* Stats */}
              <div className="flex flex-wrap justify-center gap-6 mb-8">
                <div className="glass px-8 py-4 rounded-2xl shadow-xl transform hover:scale-105 transition-transform">
                  <div className="flex items-center gap-3 text-white">
                    <Icons.Fire />
                    <div className="text-left">
                      <div className="text-3xl font-black">24,891</div>
                      <div className="text-sm opacity-90">threads viraux crÃ©Ã©s</div>
                    </div>
                  </div>
                </div>
                
                <div className="glass px-8 py-4 rounded-2xl shadow-xl transform hover:scale-105 transition-transform">
                  <div className="flex items-center gap-3 text-white">
                    <Icons.TrendingUp />
                    <div className="text-left">
                      <div className="text-3xl font-black">+587%</div>
                      <div className="text-sm opacity-90">d'engagement moyen</div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Counter */}
              <div className={`inline-flex items-center gap-3 ${isPremium ? 'bg-gradient-to-r from-yellow-400 to-orange-500' : 'bg-white'} ${isPremium ? 'text-gray-900' : 'text-purple-600'} px-6 py-3 rounded-full font-bold text-lg shadow-2xl ${!isPremium && remainingUses === 0 ? 'animate-pulse' : ''}`}>
                {isPremium ? <Icons.Crown /> : <Icons.Zap />}
                {isPremium ? (
                  <span className="flex items-center gap-2">
                    <Icons.Fire />
                    PREMIUM - Threads illimitÃ©s
                    <Icons.Fire />
                  </span>
                ) : remainingUses > 0 ? (
                  <span>{remainingUses} thread{remainingUses > 1 ? 's' : ''} viral{remainingUses > 1 ? 'aux' : ''} gratuit{remainingUses > 1 ? 's' : ''} aujourd'hui ðŸ”¥</span>
                ) : (
                  <span className="flex items-center gap-2">
                    Limite atteinte â†’ <span className="underline">Passe Premium!</span>
                  </span>
                )}
              </div>
            </div>

            {/* Main Grid */}
            <div className="grid lg:grid-cols-2 gap-8">
              {/* Left Panel */}
              <div className="bg-white/95 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/20">
                <h2 className="text-3xl font-black mb-6 gradient-text flex items-center gap-3">
                  <Icons.Fire />
                  CrÃ©e ton Thread Viral
                </h2>

                {/* Platform */}
                <div className="mb-6">
                  <label className="block text-sm font-bold text-gray-700 mb-3">Plateforme</label>
                  <div className="grid grid-cols-2 gap-4">
                    <button
                      onClick={() => setPlatform('twitter')}
                      className={`p-5 rounded-2xl font-bold transition-all transform hover:scale-105 ${
                        platform === 'twitter'
                          ? 'bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-xl scale-105'
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`}
                    >
                      <Icons.Twitter />
                      <div className="mt-2 text-sm">Twitter/X</div>
                    </button>
                    <button
                      onClick={() => setPlatform('linkedin')}
                      className={`p-5 rounded-2xl font-bold transition-all transform hover:scale-105 ${
                        platform === 'linkedin'
                          ? 'bg-gradient-to-br from-blue-700 to-blue-800 text-white shadow-xl scale-105'
                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                      }`}
                    >
                      <Icons.Linkedin />
                      <div className="mt-2 text-sm">LinkedIn</div>
                    </button>
                  </div>
                </div>

                {/* Topic */}
                <div className="mb-6">
                  <label className="block text-sm font-bold text-gray-700 mb-3">
                    ðŸ’¡ Ton sujet (sois prÃ©cis !)
                  </label>
                  <textarea
                    value={topic}
                    onChange={(e) => setTopic(e.target.value)}
                    placeholder="Ex: Les 7 erreurs qui tuent la productivitÃ© des entrepreneurs..."
                    className="w-full p-5 border-2 border-gray-200 rounded-2xl focus:border-purple-500 focus:ring-4 focus:ring-purple-200 outline-none resize-none text-lg transition-all"
                    rows="4"
                  />
                  <p className="text-xs text-gray-500 mt-2 flex items-center gap-2">
                    <Icons.Sparkles />
                    Plus ton sujet est prÃ©cis, plus le thread sera punchy !
                  </p>
                </div>

                {/* Tone */}
                <div className="mb-6">
                  <label className="block text-sm font-bold text-gray-700 mb-3">ðŸŽ¯ Style & Vibe</label>
                  <div className="grid grid-cols-2 gap-3">
                    {tones.map((t) => (
                      <button
                        key={t.id}
                        onClick={() => setTone(t.id)}
                        className={`p-4 rounded-2xl text-left transition-all transform hover:scale-105 ${
                          tone === t.id
                            ? `bg-gradient-to-br ${t.color} text-white shadow-xl scale-105`
                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                        }`}
                      >
                        <div className="font-bold">{t.name}</div>
                        <div className="text-xs opacity-90 mt-1">{t.desc}</div>
                      </button>
                    ))}
                  </div>
                </div>

                {/* Generate Button */}
                <button
                  onClick={generateThread}
                  disabled={loading || !topic.trim()}
                  className="w-full bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white py-5 rounded-2xl font-black text-xl shadow-2xl hover:shadow-3xl transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-3 mb-6"
                >
                  {loading ? (
                    <>
                      <Icons.Loader />
                      <span className="animate-pulse">IA en action...</span>
                    </>
                  ) : (
                    <>
                      <Icons.Fire />
                      GÃ‰NÃ‰RER LE THREAD VIRAL
                      <Icons.Fire />
                    </>
                  )}
                </button>

                {/* Features */}
                <div className="bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 p-5 rounded-2xl border-2 border-purple-200">
                  <div className="text-sm space-y-3 font-medium text-gray-700">
                    <div className="flex items-center gap-3">
                      <Icons.Check />
                      <span>Hooks ultra-viraux garantis ðŸ”¥</span>
                    </div>
                    <div className="flex items-center gap-3">
                      <Icons.Check />
                      <span>Threads qui font 10K+ vues</span>
                    </div>
                    <div className="flex items-center gap-3">
                      <Icons.Check />
                      <span>PrÃªt Ã  copier-coller</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* Right Panel */}
              <div>
                {thread.length > 0 ? (
                  <div className="bg-white/95 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/20 animate-fade-in">
                    <div className="flex items-center justify-between mb-6">
                      <h2 className="text-3xl font-black gradient-text flex items-center gap-3">
                        <Icons.Fire />
                        Thread Viral PrÃªt !
                      </h2>
                      <button
                        onClick={copyThread}
                        className="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all font-bold text-sm flex items-center gap-2 shadow-lg transform hover:scale-105"
                      >
                        {copied ? (
                          <>
                            <Icons.Check />
                            CopiÃ© ! ðŸŽ‰
                          </>
                        ) : (
                          <>
                            <Icons.Copy />
                            Copier
                          </>
                        )}
                      </button>
                    </div>

                    <div className="space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar">
                      {thread.map((post, index) => (
                        <div key={index} className="relative border-l-4 border-purple-500 pl-5 py-4 bg-gradient-to-r from-purple-50/50 to-transparent rounded-r-2xl hover:from-purple-100/50 transition-all group">
                          <div className="flex items-center justify-between mb-2">
                            <div className="text-xs font-black text-purple-600 px-3 py-1 bg-purple-100 rounded-full">
                              POST {index + 1}/{thread.length}
                            </div>
                            <div className="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                              <button className="p-1 hover:bg-purple-100 rounded text-purple-600">
                                <Icons.Heart />
                              </button>
                              <button className="p-1 hover:bg-purple-100 rounded text-purple-600">
                                <Icons.Eye />
                              </button>
                            </div>
                          </div>
                          <div className="text-gray-800 whitespace-pre-wrap leading-relaxed font-medium">
                            {post}
                          </div>
                          {index === 0 && (
                            <div className="mt-2 inline-flex items-center gap-2 text-xs font-bold text-orange-600 bg-orange-100 px-3 py-1 rounded-full">
                              <Icons.Fire />
                              HOOK VIRAL
                            </div>
                          )}
                        </div>
                      ))}
                    </div>

                    <div className="mt-6 p-5 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border-2 border-green-300 shadow-lg">
                      <div className="flex items-start gap-4">
                        <div className="flex-shrink-0 w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center">
                          <Icons.Fire />
                        </div>
                        <div>
                          <div className="font-black text-green-800 mb-2 text-lg">Thread viral prÃªt Ã  dÃ©coller ! ðŸš€</div>
                          <div className="text-sm text-green-700 font-medium leading-relaxed">
                            Copie ce thread, publie sur {platform === 'twitter' ? 'Twitter/X' : 'LinkedIn'}, et regarde l'engagement exploser ! ðŸ’¥
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                ) : (
                  <div className="bg-white/95 backdrop-blur-xl rounded-3xl p-12 shadow-2xl text-center border border-white/20">
                    <div className="w-32 h-32 bg-gradient-to-br from-purple-200 to-pink-200 rounded-full flex items-center justify-center mx-auto mb-8 animate-pulse">
                      <Icons.Fire />
                    </div>
                    <h3 className="text-3xl font-black text-gray-800 mb-4 gradient-text">
                      Ton thread viral apparaÃ®tra ici
                    </h3>
                    <p className="text-gray-600 mb-8 text-lg">
                      L'IA va crÃ©er un thread ultra-punchy qui va cartonner ðŸ”¥
                    </p>
                    <div className="grid grid-cols-2 gap-6 max-w-md mx-auto">
                      <div className="p-6 bg-gradient-to-br from-orange-50 to-red-50 rounded-2xl border-2 border-orange-200">
                        <div className="text-4xl mb-3">ðŸ’¥</div>
                        <div className="text-sm font-bold text-gray-700">Hooks viraux</div>
                      </div>
                      <div className="p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl border-2 border-purple-200">
                        <div className="text-4xl mb-3">ðŸš€</div>
                        <div className="text-sm font-bold text-gray-700">Engagement 10x</div>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>

            {/* Paywall */}
            {showPaywall && (
              <div className="fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-fade-in">
                <div className="bg-white rounded-3xl p-10 max-w-lg w-full shadow-2xl relative overflow-hidden">
                  <div className="absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500"></div>
                  
                  <button
                    onClick={() => setShowPaywall(false)}
                    className="absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl font-bold transition-colors"
                  >
                    âœ•
                  </button>
                  
                  <div className="text-center">
                    <div className="w-24 h-24 bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto mb-8 animate-bounce">
                      <Icons.Crown />
                    </div>
                    
                    <h3 className="text-4xl font-black mb-4 gradient-text">Deviens Premium</h3>
                    <p className="text-gray-600 mb-8 text-lg font-medium">
                      Tu as explosÃ© tes 3 threads gratuits ! ðŸ”¥
                    </p>

                    <div className="bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 rounded-3xl p-8 mb-8 border-2 border-purple-200">
                      <div className="text-left space-y-4 font-medium">
                        <div className="flex items-center gap-4">
                          <div className="flex-shrink-0 w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center">
                            <Icons.Check />
                          </div>
                          <span className="text-gray-800">Threads viraux <span className="font-black">ILLIMITÃ‰S</span> ðŸš€</span>
                        </div>
                        <div className="flex items-center gap-4">
                          <div className="flex-shrink-0 w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center">
                            <Icons.Check />
                          </div>
                          <span className="text-gray-800">IA <span className="font-black">PREMIUM</span> encore plus puissante</span>
                        </div>
                        <div className="flex items-center gap-4">
                          <div className="flex-shrink-0 w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center">
                            <Icons.Check />
                          </div>
                          <span className="text-gray-800">Templates <span className="font-black">EXCLUSIFS</span> top creators</span>
                        </div>
                        <div className="flex items-center gap-4">
                          <div className="flex-shrink-0 w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center">
                            <Icons.Check />
                          </div>
                          <span className="text-gray-800">Support <span className="font-black">PRIORITAIRE</span> 24/7</span>
                        </div>
                      </div>
                    </div>

                    <div className="text-center mb-8">
                      <div className="text-5xl font-black gradient-text mb-2">
                        9,99â‚¬<span className="text-2xl">/mois</span>
                      </div>
                      <div className="text-sm text-gray-500 font-medium">Annule quand tu veux â€¢ Sans engagement</div>
                    </div>

                    <button 
                      onClick={handleUpgrade}
                      className="w-full bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white py-5 rounded-2xl font-black text-xl shadow-2xl hover:shadow-3xl transition-all transform hover:scale-105 mb-4 flex items-center justify-center gap-3"
                    >
                      <Icons.Fire />
                      PASSER PREMIUM MAINTENANT
                      <Icons.Fire />
                    </button>
                    
                    <button
                      onClick={() => setShowPaywall(false)}
                      className="w-full text-gray-500 hover:text-gray-700 font-bold transition-colors"
                    >
                      Peut-Ãªtre plus tard
                    </button>
                    
                    <p className="text-xs text-gray-400 mt-6 flex items-center justify-center gap-2">
                      ðŸ”’ Paiement 100% sÃ©curisÃ© par Stripe
                    </p>
                  </div>
                </div>
              </div>
            )}

            {/* Footer */}
            <div className="mt-16 text-center">
              <p className="text-white/80 text-sm font-medium mb-4">
                âœ¨ VERSION 3 - Design amÃ©liorÃ© â€¢ Threads ultra-punchy â€¢ PrÃªt pour le succÃ¨s ðŸš€
              </p>
              <p className="text-white/60 text-xs">
                CrÃ©Ã© avec ðŸ’œ pour les crÃ©ateurs qui veulent exploser sur les rÃ©seaux
              </p>
            </div>
          </div>

          <style>{`
            .custom-scrollbar::-webkit-scrollbar {
              width: 8px;
            }
            .custom-scrollbar::-webkit-scrollbar-track {
              background: #f1f1f1;
              border-radius: 10px;
            }
            .custom-scrollbar::-webkit-scrollbar-thumb {
              background: linear-gradient(to bottom, #a855f7, #ec4899);
              border-radius: 10px;
            }
            .custom-scrollbar::-webkit-scrollbar-thumb:hover {
              background: linear-gradient(to bottom, #9333ea, #db2777);
            }
          `}</style>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<ThreadGenius />);
  </script>
</body>
</html>
